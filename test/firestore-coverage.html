<!DOCTYPE html>
<meta charset="utf-8">
<title>Firestore Rule Coverage Report</title>
<style>
.coverage-expr {
  padding-bottom: 4px;
  display: inline-block;
  border-bottom: 3px solid black;
  vertical-align: top;
}
.coverage-expr:hover {
  background-color: rgba(255, 100, 100, 0.2);
  cursor: default;
  border-bottom: 3px solid red;
}
</style>

<script>
// Populated by the emulator at runtime
const data = {
  "rules": {
    "files": [{
      "content": "rules_version \u003d \u00272\u0027;\r\nservice cloud.firestore {\r\n    match /databases/{database}/documents {\r\n        \r\n        function isAuth() {\r\n            return request.auth !\u003d null\r\n        }\r\n\r\n        function isAdmin() {\r\n            return isAuth() \u0026\u0026 \r\n            (request.auth.uid \u003d\u003d \u00271bOAvkBFV1St3ekuxydGxNlqIGM2\u0027\r\n            || request.auth.uid \u003d\u003d \u0027pUWeCV6FFFfikjLyo6KTuxayrzZ2\u0027\r\n            || request.auth.uid \u003d\u003d \u0027Pv3IEvvuYONvSjNl630Tap0ERGN2\u0027)\r\n        }\r\n\r\n        function actualData() {\r\n            return resource.data\r\n        }\r\n\r\n        function incomingData() {\r\n            return request.resource.data\r\n        }\r\n\r\n        function notModified(fields) {\r\n            return incomingData().diff(incomingData()).unchangedKeys().hasAll(fields)\r\n        }\r\n\r\n        // lock access for all documents\r\n        match /{document\u003d**} {\r\n            allow read, write: if false;\r\n        }\r\n\r\n        match /mails/{mail} {\r\n            allow read: if isAdmin()\r\n\r\n            // Only valid emails\r\n            allow create: if \r\n                incomingData().mail.matches(\u0027.+@.+\\\\.[a-z]+\u0027)\r\n\r\n            // unsubscribe\r\n            allow delete: if isAuth()\r\n                \u0026\u0026 actualData().mail \u003d\u003d request.auth.token.email\r\n        }\r\n\r\n        match /users/{id} {\r\n            allow read: if true\r\n\r\n            allow list, delete: if false\r\n\r\n            allow create, update: if isAuth()\r\n                \u0026\u0026 request.auth.uid \u003d\u003d id\r\n                \u0026\u0026 false\r\n        }\r\n        \r\n        match /magazines/{magazine} {\r\n            allow read: if true\r\n            allow write: if isAdmin()\r\n        }\r\n\r\n        match /articles/{articleId} {\r\n            allow get: if true\r\n\r\n            allow list: \r\n                if request.query.limit \u003c\u003d 15\r\n                \u0026\u0026 (\r\n                    isAdmin()\r\n                    || actualData().published \u003d\u003d true\r\n                    || (isAuth() \u0026\u0026 actualData().uid \u003d\u003d request.auth.uid)\r\n                )\r\n\r\n            allow create: if isAuth()\r\n                \u0026\u0026 incomingData().uid \u003d\u003d request.auth.uid\r\n                \u0026\u0026 incomingData().published \u003d\u003d false\r\n                \u0026\u0026 incomingData().title.size() \u003c\u003d 80\r\n                \u0026\u0026 incomingData().content.size() \u003c\u003d 4096\r\n                \u0026\u0026 incomingData().createdAt \u003d\u003d request.time\r\n\r\n            allow update:\r\n                if (\r\n                    isAuth()\r\n                    \u0026\u0026 notModified([\u0027uid\u0027, \u0027createdAt\u0027])\r\n                    \u0026\u0026 incomingData().published \u003d\u003d false\r\n                    \u0026\u0026 incomingData().title.size() \u003c\u003d 80\r\n                    \u0026\u0026 incomingData().content.size() \u003c\u003d 4096\r\n                    \u0026\u0026 incomingData().updatedAt \u003d\u003d request.time\r\n                    \u0026\u0026 request.time \u003e actualData().updatedAt + duration.value(60, \u0027s\u0027)\r\n                )\r\n                || isAdmin()\r\n\r\n            allow delete: if isAuth()\r\n                \u0026\u0026 actualData().uid \u003d\u003d request.auth.uid\r\n        }\r\n\r\n        match /categories/{cid} {\r\n            allow read: if true\r\n        }\r\n    }\r\n}"
    }]
  },
  "report": [{
    "sourcePosition": {
      "line": 6,
      "column": 20,
      "currentOffset": 152,
      "endOffset": 171
    },
    "values": [{
      "value": {
        "boolValue": true
      },
      "count": 5
    }],
    "children": [{
      "sourcePosition": {
        "line": 6,
        "column": 20,
        "currentOffset": 152,
        "endOffset": 163
      },
      "values": [{
        "value": {
          "mapValue": {
            "fields": {
              "uid": {
                "stringValue": "author"
              },
              "token": {
                "mapValue": {
                  "fields": {
                    "iss": {
                      "stringValue": "https://securetoken.google.com/objects-omsistuff"
                    },
                    "aud": {
                      "stringValue": "objects-omsistuff"
                    },
                    "iat": {
                      "intValue": "0"
                    },
                    "exp": {
                      "intValue": "3600"
                    },
                    "auth_time": {
                      "intValue": "0"
                    },
                    "sub": {
                      "stringValue": "author"
                    },
                    "user_id": {
                      "stringValue": "author"
                    },
                    "firebase": {
                      "mapValue": {
                        "fields": {
                          "sign_in_provider": {
                            "stringValue": "custom"
                          },
                          "identities": {
                            "mapValue": {
                            }
                          }
                        }
                      }
                    },
                    "email": {
                      "stringValue": "alice@example.com"
                    }
                  }
                }
              }
            }
          }
        },
        "count": 5
      }],
      "children": [{
        "sourcePosition": {
          "line": 6,
          "column": 20,
          "currentOffset": 152,
          "endOffset": 158
        },
        "values": [{
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:58.712Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "writeFields": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "author"
                            },
                            "category": {
                              "stringValue": "any"
                            },
                            "createdAt": {
                              "timestampValue": "2021-04-05T07:30:58.712Z"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.112Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "writeFields": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "category": {
                              "stringValue": "any"
                            },
                            "createdAt": {
                              "timestampValue": "2021-04-05T07:30:59.112Z"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.179Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "nullValue": null
                },
                "writeFields": {
                  "nullValue": null
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "createdAt": {
                              "timestampValue": "1970-01-01T00:00:01Z"
                            },
                            "category": {
                              "stringValue": "any"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.213Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "nullValue": null
                },
                "writeFields": {
                  "nullValue": null
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": true
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "createdAt": {
                              "timestampValue": "1970-01-01T00:00:01Z"
                            },
                            "category": {
                              "stringValue": "any"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.767Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "users"
                    }, {
                      "simple": "author"
                    }]
                  }
                },
                "transforms": {
                  "nullValue": null
                },
                "writeFields": {
                  "nullValue": null
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "profilePic": {
                              "stringValue": "https://img.com/example.jpg"
                            },
                            "uid": {
                              "stringValue": "other"
                            },
                            "name": {
                              "stringValue": "Jonh Doe"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "users"
                          }, {
                            "simple": "author"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "author"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 10,
      "column": 20,
      "currentOffset": 236,
      "endOffset": 446
    },
    "children": [{
      "sourcePosition": {
        "line": 10,
        "column": 20,
        "currentOffset": 236,
        "endOffset": 241
      }
    }, {
      "sourcePosition": {
        "line": 11,
        "column": 13,
        "currentOffset": 262,
        "endOffset": 446
      },
      "children": [{
        "sourcePosition": {
          "line": 11,
          "column": 14,
          "currentOffset": 263,
          "endOffset": 379
        },
        "children": [{
          "sourcePosition": {
            "line": 11,
            "column": 14,
            "currentOffset": 263,
            "endOffset": 312
          },
          "children": [{
            "sourcePosition": {
              "line": 11,
              "column": 14,
              "currentOffset": 263,
              "endOffset": 278
            },
            "children": [{
              "sourcePosition": {
                "line": 11,
                "column": 14,
                "currentOffset": 263,
                "endOffset": 274
              },
              "children": [{
                "sourcePosition": {
                  "line": 11,
                  "column": 14,
                  "currentOffset": 263,
                  "endOffset": 269
                }
              }]
            }]
          }]
        }, {
          "sourcePosition": {
            "line": 12,
            "column": 16,
            "currentOffset": 330,
            "endOffset": 379
          },
          "children": [{
            "sourcePosition": {
              "line": 12,
              "column": 16,
              "currentOffset": 330,
              "endOffset": 345
            },
            "children": [{
              "sourcePosition": {
                "line": 12,
                "column": 16,
                "currentOffset": 330,
                "endOffset": 341
              },
              "children": [{
                "sourcePosition": {
                  "line": 12,
                  "column": 16,
                  "currentOffset": 330,
                  "endOffset": 336
                }
              }]
            }]
          }]
        }]
      }, {
        "sourcePosition": {
          "line": 13,
          "column": 16,
          "currentOffset": 397,
          "endOffset": 446
        },
        "children": [{
          "sourcePosition": {
            "line": 13,
            "column": 16,
            "currentOffset": 397,
            "endOffset": 412
          },
          "children": [{
            "sourcePosition": {
              "line": 13,
              "column": 16,
              "currentOffset": 397,
              "endOffset": 408
            },
            "children": [{
              "sourcePosition": {
                "line": 13,
                "column": 16,
                "currentOffset": 397,
                "endOffset": 403
              }
            }]
          }]
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 17,
      "column": 20,
      "currentOffset": 515,
      "endOffset": 527
    },
    "children": [{
      "sourcePosition": {
        "line": 17,
        "column": 20,
        "currentOffset": 515,
        "endOffset": 522
      }
    }]
  }, {
    "sourcePosition": {
      "line": 21,
      "column": 20,
      "currentOffset": 597,
      "endOffset": 617
    },
    "values": [{
      "value": {
        "mapValue": {
          "fields": {
            "published": {
              "boolValue": false
            },
            "title": {
              "stringValue": "Lorem Ipsum"
            },
            "content": {
              "stringValue": "lorem ipsum dolor sit amet"
            },
            "uid": {
              "stringValue": "author"
            },
            "category": {
              "stringValue": "any"
            },
            "createdAt": {
              "timestampValue": "2021-04-05T07:30:58.712Z"
            }
          }
        }
      },
      "count": 5
    }, {
      "value": {
        "mapValue": {
          "fields": {
            "published": {
              "boolValue": false
            },
            "title": {
              "stringValue": "Lorem Ipsum"
            },
            "content": {
              "stringValue": "lorem ipsum dolor sit amet"
            },
            "uid": {
              "stringValue": "otherPeople"
            },
            "category": {
              "stringValue": "any"
            },
            "createdAt": {
              "timestampValue": "2021-04-05T07:30:59.112Z"
            }
          }
        }
      },
      "count": 1
    }, {
      "value": {
        "mapValue": {
          "fields": {
            "published": {
              "boolValue": false
            },
            "title": {
              "stringValue": "Lorem Ipsum"
            },
            "content": {
              "stringValue": "lorem ipsum dolor sit amet"
            },
            "uid": {
              "stringValue": "otherPeople"
            },
            "createdAt": {
              "timestampValue": "1970-01-01T00:00:01Z"
            },
            "category": {
              "stringValue": "any"
            }
          }
        }
      },
      "count": 1
    }, {
      "value": {
        "mapValue": {
          "fields": {
            "published": {
              "boolValue": true
            },
            "title": {
              "stringValue": "Lorem Ipsum"
            },
            "content": {
              "stringValue": "lorem ipsum dolor sit amet"
            },
            "uid": {
              "stringValue": "otherPeople"
            },
            "createdAt": {
              "timestampValue": "1970-01-01T00:00:01Z"
            },
            "category": {
              "stringValue": "any"
            }
          }
        }
      },
      "count": 1
    }],
    "children": [{
      "sourcePosition": {
        "line": 21,
        "column": 20,
        "currentOffset": 597,
        "endOffset": 612
      },
      "values": [{
        "value": {
          "mapValue": {
            "fields": {
              "data": {
                "mapValue": {
                  "fields": {
                    "published": {
                      "boolValue": false
                    },
                    "title": {
                      "stringValue": "Lorem Ipsum"
                    },
                    "content": {
                      "stringValue": "lorem ipsum dolor sit amet"
                    },
                    "uid": {
                      "stringValue": "author"
                    },
                    "category": {
                      "stringValue": "any"
                    },
                    "createdAt": {
                      "timestampValue": "2021-04-05T07:30:58.712Z"
                    }
                  }
                }
              },
              "__name__": {
                "pathValue": {
                  "segments": [{
                    "simple": "databases"
                  }, {
                    "simple": "(default)"
                  }, {
                    "simple": "documents"
                  }, {
                    "simple": "articles"
                  }, {
                    "simple": "articleId"
                  }]
                }
              },
              "id": {
                "stringValue": "articleId"
              }
            }
          }
        },
        "count": 5
      }, {
        "value": {
          "mapValue": {
            "fields": {
              "data": {
                "mapValue": {
                  "fields": {
                    "published": {
                      "boolValue": false
                    },
                    "title": {
                      "stringValue": "Lorem Ipsum"
                    },
                    "content": {
                      "stringValue": "lorem ipsum dolor sit amet"
                    },
                    "uid": {
                      "stringValue": "otherPeople"
                    },
                    "category": {
                      "stringValue": "any"
                    },
                    "createdAt": {
                      "timestampValue": "2021-04-05T07:30:59.112Z"
                    }
                  }
                }
              },
              "__name__": {
                "pathValue": {
                  "segments": [{
                    "simple": "databases"
                  }, {
                    "simple": "(default)"
                  }, {
                    "simple": "documents"
                  }, {
                    "simple": "articles"
                  }, {
                    "simple": "articleId"
                  }]
                }
              },
              "id": {
                "stringValue": "articleId"
              }
            }
          }
        },
        "count": 1
      }, {
        "value": {
          "mapValue": {
            "fields": {
              "data": {
                "mapValue": {
                  "fields": {
                    "published": {
                      "boolValue": false
                    },
                    "title": {
                      "stringValue": "Lorem Ipsum"
                    },
                    "content": {
                      "stringValue": "lorem ipsum dolor sit amet"
                    },
                    "uid": {
                      "stringValue": "otherPeople"
                    },
                    "createdAt": {
                      "timestampValue": "1970-01-01T00:00:01Z"
                    },
                    "category": {
                      "stringValue": "any"
                    }
                  }
                }
              },
              "__name__": {
                "pathValue": {
                  "segments": [{
                    "simple": "databases"
                  }, {
                    "simple": "(default)"
                  }, {
                    "simple": "documents"
                  }, {
                    "simple": "articles"
                  }, {
                    "simple": "articleId"
                  }]
                }
              },
              "id": {
                "stringValue": "articleId"
              }
            }
          }
        },
        "count": 1
      }, {
        "value": {
          "mapValue": {
            "fields": {
              "data": {
                "mapValue": {
                  "fields": {
                    "published": {
                      "boolValue": true
                    },
                    "title": {
                      "stringValue": "Lorem Ipsum"
                    },
                    "content": {
                      "stringValue": "lorem ipsum dolor sit amet"
                    },
                    "uid": {
                      "stringValue": "otherPeople"
                    },
                    "createdAt": {
                      "timestampValue": "1970-01-01T00:00:01Z"
                    },
                    "category": {
                      "stringValue": "any"
                    }
                  }
                }
              },
              "__name__": {
                "pathValue": {
                  "segments": [{
                    "simple": "databases"
                  }, {
                    "simple": "(default)"
                  }, {
                    "simple": "documents"
                  }, {
                    "simple": "articles"
                  }, {
                    "simple": "articleId"
                  }]
                }
              },
              "id": {
                "stringValue": "articleId"
              }
            }
          }
        },
        "count": 1
      }],
      "children": [{
        "sourcePosition": {
          "line": 21,
          "column": 20,
          "currentOffset": 597,
          "endOffset": 603
        },
        "values": [{
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:58.712Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "writeFields": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "author"
                            },
                            "category": {
                              "stringValue": "any"
                            },
                            "createdAt": {
                              "timestampValue": "2021-04-05T07:30:58.712Z"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 5
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.112Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "writeFields": {
                  "listValue": {
                    "values": [{
                      "stringValue": "createdAt"
                    }]
                  }
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "category": {
                              "stringValue": "any"
                            },
                            "createdAt": {
                              "timestampValue": "2021-04-05T07:30:59.112Z"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.179Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "nullValue": null
                },
                "writeFields": {
                  "nullValue": null
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": false
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "createdAt": {
                              "timestampValue": "1970-01-01T00:00:01Z"
                            },
                            "category": {
                              "stringValue": "any"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }, {
          "value": {
            "mapValue": {
              "fields": {
                "time": {
                  "timestampValue": "2021-04-05T07:30:59.213Z"
                },
                "auth": {
                  "mapValue": {
                    "fields": {
                      "uid": {
                        "stringValue": "author"
                      },
                      "token": {
                        "mapValue": {
                          "fields": {
                            "iss": {
                              "stringValue": "https://securetoken.google.com/objects-omsistuff"
                            },
                            "aud": {
                              "stringValue": "objects-omsistuff"
                            },
                            "iat": {
                              "intValue": "0"
                            },
                            "exp": {
                              "intValue": "3600"
                            },
                            "auth_time": {
                              "intValue": "0"
                            },
                            "sub": {
                              "stringValue": "author"
                            },
                            "user_id": {
                              "stringValue": "author"
                            },
                            "firebase": {
                              "mapValue": {
                                "fields": {
                                  "sign_in_provider": {
                                    "stringValue": "custom"
                                  },
                                  "identities": {
                                    "mapValue": {
                                    }
                                  }
                                }
                              }
                            },
                            "email": {
                              "stringValue": "alice@example.com"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "headers": {
                  "mapValue": {
                  }
                },
                "inTransaction": {
                  "boolValue": true
                },
                "path": {
                  "pathValue": {
                    "segments": [{
                      "simple": "databases"
                    }, {
                      "simple": "(default)"
                    }, {
                      "simple": "documents"
                    }, {
                      "simple": "articles"
                    }, {
                      "simple": "articleId"
                    }]
                  }
                },
                "transforms": {
                  "nullValue": null
                },
                "writeFields": {
                  "nullValue": null
                },
                "readFields": {
                  "nullValue": null
                },
                "resource": {
                  "mapValue": {
                    "fields": {
                      "data": {
                        "mapValue": {
                          "fields": {
                            "published": {
                              "boolValue": true
                            },
                            "title": {
                              "stringValue": "Lorem Ipsum"
                            },
                            "content": {
                              "stringValue": "lorem ipsum dolor sit amet"
                            },
                            "uid": {
                              "stringValue": "otherPeople"
                            },
                            "createdAt": {
                              "timestampValue": "1970-01-01T00:00:01Z"
                            },
                            "category": {
                              "stringValue": "any"
                            }
                          }
                        }
                      },
                      "__name__": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "articles"
                          }, {
                            "simple": "articleId"
                          }]
                        }
                      },
                      "id": {
                        "stringValue": "articleId"
                      }
                    }
                  }
                },
                "method": {
                  "stringValue": "create"
                }
              }
            }
          },
          "count": 1
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 25,
      "column": 20,
      "currentOffset": 692,
      "endOffset": 756
    },
    "children": [{
      "sourcePosition": {
        "line": 25,
        "column": 20,
        "currentOffset": 692,
        "endOffset": 740
      },
      "children": [{
        "sourcePosition": {
          "line": 25,
          "column": 20,
          "currentOffset": 692,
          "endOffset": 723
        },
        "children": [{
          "sourcePosition": {
            "line": 25,
            "column": 20,
            "currentOffset": 692,
            "endOffset": 703
          }
        }, {
          "sourcePosition": {
            "line": 25,
            "column": 40,
            "currentOffset": 712,
            "endOffset": 723
          }
        }]
      }]
    }, {
      "sourcePosition": {
        "line": 25,
        "column": 79,
        "currentOffset": 751,
        "endOffset": 756
      }
    }]
  }, {
    "sourcePosition": {
      "line": 34,
      "column": 28,
      "currentOffset": 960,
      "endOffset": 966
    }
  }, {
    "sourcePosition": {
      "line": 38,
      "column": 17,
      "currentOffset": 1054,
      "endOffset": 1097
    },
    "children": [{
      "sourcePosition": {
        "line": 38,
        "column": 17,
        "currentOffset": 1054,
        "endOffset": 1072
      },
      "children": [{
        "sourcePosition": {
          "line": 38,
          "column": 17,
          "currentOffset": 1054,
          "endOffset": 1065
        }
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 41,
      "column": 30,
      "currentOffset": 1160,
      "endOffset": 1233
    },
    "children": [{
      "sourcePosition": {
        "line": 41,
        "column": 30,
        "currentOffset": 1160,
        "endOffset": 1165
      }
    }, {
      "sourcePosition": {
        "line": 42,
        "column": 20,
        "currentOffset": 1189,
        "endOffset": 1233
      },
      "children": [{
        "sourcePosition": {
          "line": 42,
          "column": 20,
          "currentOffset": 1189,
          "endOffset": 1205
        },
        "children": [{
          "sourcePosition": {
            "line": 42,
            "column": 20,
            "currentOffset": 1189,
            "endOffset": 1198
          }
        }]
      }, {
        "sourcePosition": {
          "line": 42,
          "column": 41,
          "currentOffset": 1210,
          "endOffset": 1233
        },
        "children": [{
          "sourcePosition": {
            "line": 42,
            "column": 41,
            "currentOffset": 1210,
            "endOffset": 1227
          },
          "children": [{
            "sourcePosition": {
              "line": 42,
              "column": 41,
              "currentOffset": 1210,
              "endOffset": 1221
            },
            "children": [{
              "sourcePosition": {
                "line": 42,
                "column": 41,
                "currentOffset": 1210,
                "endOffset": 1216
              }
            }]
          }]
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 50,
      "column": 38,
      "currentOffset": 1394,
      "endOffset": 1470
    },
    "values": [{
      "value": {
        "boolValue": false
      },
      "count": 1
    }],
    "children": [{
      "sourcePosition": {
        "line": 50,
        "column": 38,
        "currentOffset": 1394,
        "endOffset": 1444
      },
      "values": [{
        "value": {
          "boolValue": true
        },
        "count": 1
      }],
      "children": [{
        "sourcePosition": {
          "line": 50,
          "column": 38,
          "currentOffset": 1394,
          "endOffset": 1399
        },
        "values": [{
          "value": {
            "boolValue": true
          },
          "count": 1
        }]
      }, {
        "sourcePosition": {
          "line": 51,
          "column": 20,
          "currentOffset": 1423,
          "endOffset": 1444
        },
        "values": [{
          "value": {
            "boolValue": true
          },
          "count": 1
        }],
        "children": [{
          "sourcePosition": {
            "line": 51,
            "column": 20,
            "currentOffset": 1423,
            "endOffset": 1438
          },
          "values": [{
            "value": {
              "stringValue": "author"
            },
            "count": 1
          }],
          "children": [{
            "sourcePosition": {
              "line": 51,
              "column": 20,
              "currentOffset": 1423,
              "endOffset": 1434
            },
            "values": [{
              "value": {
                "mapValue": {
                  "fields": {
                    "uid": {
                      "stringValue": "author"
                    },
                    "token": {
                      "mapValue": {
                        "fields": {
                          "iss": {
                            "stringValue": "https://securetoken.google.com/objects-omsistuff"
                          },
                          "aud": {
                            "stringValue": "objects-omsistuff"
                          },
                          "iat": {
                            "intValue": "0"
                          },
                          "exp": {
                            "intValue": "3600"
                          },
                          "auth_time": {
                            "intValue": "0"
                          },
                          "sub": {
                            "stringValue": "author"
                          },
                          "user_id": {
                            "stringValue": "author"
                          },
                          "firebase": {
                            "mapValue": {
                              "fields": {
                                "sign_in_provider": {
                                  "stringValue": "custom"
                                },
                                "identities": {
                                  "mapValue": {
                                  }
                                }
                              }
                            }
                          },
                          "email": {
                            "stringValue": "alice@example.com"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "count": 1
            }],
            "children": [{
              "sourcePosition": {
                "line": 51,
                "column": 20,
                "currentOffset": 1423,
                "endOffset": 1429
              },
              "values": [{
                "value": {
                  "mapValue": {
                    "fields": {
                      "time": {
                        "timestampValue": "2021-04-05T07:30:59.767Z"
                      },
                      "auth": {
                        "mapValue": {
                          "fields": {
                            "uid": {
                              "stringValue": "author"
                            },
                            "token": {
                              "mapValue": {
                                "fields": {
                                  "iss": {
                                    "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                  },
                                  "aud": {
                                    "stringValue": "objects-omsistuff"
                                  },
                                  "iat": {
                                    "intValue": "0"
                                  },
                                  "exp": {
                                    "intValue": "3600"
                                  },
                                  "auth_time": {
                                    "intValue": "0"
                                  },
                                  "sub": {
                                    "stringValue": "author"
                                  },
                                  "user_id": {
                                    "stringValue": "author"
                                  },
                                  "firebase": {
                                    "mapValue": {
                                      "fields": {
                                        "sign_in_provider": {
                                          "stringValue": "custom"
                                        },
                                        "identities": {
                                          "mapValue": {
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "email": {
                                    "stringValue": "alice@example.com"
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "headers": {
                        "mapValue": {
                        }
                      },
                      "inTransaction": {
                        "boolValue": true
                      },
                      "path": {
                        "pathValue": {
                          "segments": [{
                            "simple": "databases"
                          }, {
                            "simple": "(default)"
                          }, {
                            "simple": "documents"
                          }, {
                            "simple": "users"
                          }, {
                            "simple": "author"
                          }]
                        }
                      },
                      "transforms": {
                        "nullValue": null
                      },
                      "writeFields": {
                        "nullValue": null
                      },
                      "readFields": {
                        "nullValue": null
                      },
                      "resource": {
                        "mapValue": {
                          "fields": {
                            "data": {
                              "mapValue": {
                                "fields": {
                                  "profilePic": {
                                    "stringValue": "https://img.com/example.jpg"
                                  },
                                  "uid": {
                                    "stringValue": "other"
                                  },
                                  "name": {
                                    "stringValue": "Jonh Doe"
                                  }
                                }
                              }
                            },
                            "__name__": {
                              "pathValue": {
                                "segments": [{
                                  "simple": "databases"
                                }, {
                                  "simple": "(default)"
                                }, {
                                  "simple": "documents"
                                }, {
                                  "simple": "users"
                                }, {
                                  "simple": "author"
                                }]
                              }
                            },
                            "id": {
                              "stringValue": "author"
                            }
                          }
                        }
                      },
                      "method": {
                        "stringValue": "create"
                      }
                    }
                  }
                },
                "count": 1
              }]
            }]
          }]
        }, {
          "sourcePosition": {
            "line": 51,
            "column": 40,
            "currentOffset": 1443,
            "endOffset": 1444
          },
          "values": [{
            "value": {
              "stringValue": "author"
            },
            "count": 1
          }]
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 57,
      "column": 29,
      "currentOffset": 1594,
      "endOffset": 1600
    }
  }, {
    "sourcePosition": {
      "line": 64,
      "column": 20,
      "currentOffset": 1736,
      "endOffset": 1942
    },
    "values": [{
      "value": {
        "boolValue": false
      },
      "count": 4
    }],
    "children": [{
      "sourcePosition": {
        "line": 64,
        "column": 20,
        "currentOffset": 1736,
        "endOffset": 1760
      },
      "values": [{
        "value": {
          "boolValue": false
        },
        "count": 4
      }],
      "children": [{
        "sourcePosition": {
          "line": 64,
          "column": 20,
          "currentOffset": 1736,
          "endOffset": 1754
        },
        "values": [{
          "value": {
            "intValue": "20"
          },
          "count": 3
        }, {
          "value": {
            "intValue": "21"
          },
          "count": 1
        }],
        "children": [{
          "sourcePosition": {
            "line": 64,
            "column": 20,
            "currentOffset": 1736,
            "endOffset": 1748
          },
          "values": [{
            "value": {
              "mapValue": {
                "fields": {
                  "distinct": {
                    "boolValue": false
                  },
                  "selectOnlyKeys": {
                    "boolValue": false
                  },
                  "groupBy": {
                    "mapValue": {
                    }
                  },
                  "kind": {
                    "stringValue": "articles"
                  },
                  "parent": {
                    "nullValue": null
                  },
                  "orderBy": {
                    "mapValue": {
                      "fields": {
                        "createdAt": {
                          "stringValue": "DESC"
                        },
                        "__name__": {
                          "stringValue": "DESC"
                        }
                      }
                    }
                  },
                  "limit": {
                    "intValue": "20"
                  },
                  "offset": {
                    "intValue": "0"
                  },
                  "allDescendants": {
                    "boolValue": false
                  }
                }
              }
            },
            "count": 3
          }, {
            "value": {
              "mapValue": {
                "fields": {
                  "distinct": {
                    "boolValue": false
                  },
                  "selectOnlyKeys": {
                    "boolValue": false
                  },
                  "groupBy": {
                    "mapValue": {
                    }
                  },
                  "kind": {
                    "stringValue": "articles"
                  },
                  "parent": {
                    "nullValue": null
                  },
                  "orderBy": {
                    "mapValue": {
                      "fields": {
                        "createdAt": {
                          "stringValue": "DESC"
                        },
                        "__name__": {
                          "stringValue": "DESC"
                        }
                      }
                    }
                  },
                  "limit": {
                    "intValue": "21"
                  },
                  "offset": {
                    "intValue": "0"
                  },
                  "allDescendants": {
                    "boolValue": false
                  }
                }
              }
            },
            "count": 1
          }],
          "children": [{
            "sourcePosition": {
              "line": 64,
              "column": 20,
              "currentOffset": 1736,
              "endOffset": 1742
            },
            "values": [{
              "value": {
                "mapValue": {
                  "fields": {
                    "time": {
                      "timestampValue": "2021-04-05T07:30:59.373Z"
                    },
                    "auth": {
                      "mapValue": {
                        "fields": {
                          "uid": {
                            "stringValue": "author"
                          },
                          "token": {
                            "mapValue": {
                              "fields": {
                                "iss": {
                                  "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                },
                                "aud": {
                                  "stringValue": "objects-omsistuff"
                                },
                                "iat": {
                                  "intValue": "0"
                                },
                                "exp": {
                                  "intValue": "3600"
                                },
                                "auth_time": {
                                  "intValue": "0"
                                },
                                "sub": {
                                  "stringValue": "author"
                                },
                                "user_id": {
                                  "stringValue": "author"
                                },
                                "firebase": {
                                  "mapValue": {
                                    "fields": {
                                      "sign_in_provider": {
                                        "stringValue": "custom"
                                      },
                                      "identities": {
                                        "mapValue": {
                                        }
                                      }
                                    }
                                  }
                                },
                                "email": {
                                  "stringValue": "alice@example.com"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "headers": {
                      "mapValue": {
                      }
                    },
                    "inTransaction": {
                      "boolValue": false
                    },
                    "fields": {
                      "nullValue": null
                    },
                    "query": {
                      "mapValue": {
                        "fields": {
                          "distinct": {
                            "boolValue": false
                          },
                          "selectOnlyKeys": {
                            "boolValue": false
                          },
                          "groupBy": {
                            "mapValue": {
                            }
                          },
                          "kind": {
                            "stringValue": "articles"
                          },
                          "parent": {
                            "nullValue": null
                          },
                          "orderBy": {
                            "mapValue": {
                              "fields": {
                                "createdAt": {
                                  "stringValue": "DESC"
                                },
                                "__name__": {
                                  "stringValue": "DESC"
                                }
                              }
                            }
                          },
                          "limit": {
                            "intValue": "20"
                          },
                          "offset": {
                            "intValue": "0"
                          },
                          "allDescendants": {
                            "boolValue": false
                          }
                        }
                      }
                    },
                    "path": {
                      "pathValue": {
                        "segments": [{
                          "simple": "databases"
                        }, {
                          "simple": "(default)"
                        }, {
                          "simple": "documents"
                        }, {
                          "simple": "articles"
                        }]
                      }
                    },
                    "method": {
                      "stringValue": "list"
                    }
                  }
                }
              },
              "count": 3
            }, {
              "value": {
                "mapValue": {
                  "fields": {
                    "time": {
                      "timestampValue": "2021-04-05T07:30:59.373Z"
                    },
                    "auth": {
                      "mapValue": {
                        "fields": {
                          "uid": {
                            "stringValue": "author"
                          },
                          "token": {
                            "mapValue": {
                              "fields": {
                                "iss": {
                                  "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                },
                                "aud": {
                                  "stringValue": "objects-omsistuff"
                                },
                                "iat": {
                                  "intValue": "0"
                                },
                                "exp": {
                                  "intValue": "3600"
                                },
                                "auth_time": {
                                  "intValue": "0"
                                },
                                "sub": {
                                  "stringValue": "author"
                                },
                                "user_id": {
                                  "stringValue": "author"
                                },
                                "firebase": {
                                  "mapValue": {
                                    "fields": {
                                      "sign_in_provider": {
                                        "stringValue": "custom"
                                      },
                                      "identities": {
                                        "mapValue": {
                                        }
                                      }
                                    }
                                  }
                                },
                                "email": {
                                  "stringValue": "alice@example.com"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "headers": {
                      "mapValue": {
                      }
                    },
                    "inTransaction": {
                      "boolValue": false
                    },
                    "fields": {
                      "nullValue": null
                    },
                    "query": {
                      "mapValue": {
                        "fields": {
                          "distinct": {
                            "boolValue": false
                          },
                          "selectOnlyKeys": {
                            "boolValue": false
                          },
                          "groupBy": {
                            "mapValue": {
                            }
                          },
                          "kind": {
                            "stringValue": "articles"
                          },
                          "parent": {
                            "nullValue": null
                          },
                          "orderBy": {
                            "mapValue": {
                              "fields": {
                                "createdAt": {
                                  "stringValue": "DESC"
                                },
                                "__name__": {
                                  "stringValue": "DESC"
                                }
                              }
                            }
                          },
                          "limit": {
                            "intValue": "21"
                          },
                          "offset": {
                            "intValue": "0"
                          },
                          "allDescendants": {
                            "boolValue": false
                          }
                        }
                      }
                    },
                    "path": {
                      "pathValue": {
                        "segments": [{
                          "simple": "databases"
                        }, {
                          "simple": "(default)"
                        }, {
                          "simple": "documents"
                        }, {
                          "simple": "articles"
                        }]
                      }
                    },
                    "method": {
                      "stringValue": "list"
                    }
                  }
                }
              },
              "count": 1
            }]
          }]
        }]
      }]
    }, {
      "sourcePosition": {
        "line": 65,
        "column": 20,
        "currentOffset": 1782,
        "endOffset": 1942
      },
      "values": [{
        "value": {
        },
        "count": 4
      }],
      "children": [{
        "sourcePosition": {
          "line": 66,
          "column": 21,
          "currentOffset": 1805,
          "endOffset": 1868
        },
        "values": [{
          "value": {
          },
          "count": 4
        }],
        "children": [{
          "sourcePosition": {
            "line": 66,
            "column": 21,
            "currentOffset": 1805,
            "endOffset": 1811
          },
          "values": [{
            "value": {
            },
            "count": 4
          }]
        }, {
          "sourcePosition": {
            "line": 67,
            "column": 24,
            "currentOffset": 1839,
            "endOffset": 1868
          },
          "values": [{
            "value": {
            },
            "count": 4
          }],
          "children": [{
            "sourcePosition": {
              "line": 67,
              "column": 24,
              "currentOffset": 1839,
              "endOffset": 1860
            },
            "values": [{
              "value": {
              },
              "count": 4
            }],
            "children": [{
              "sourcePosition": {
                "line": 67,
                "column": 24,
                "currentOffset": 1839,
                "endOffset": 1848
              },
              "values": [{
                "value": {
                },
                "count": 4
              }]
            }]
          }]
        }]
      }, {
        "sourcePosition": {
          "line": 68,
          "column": 24,
          "currentOffset": 1894,
          "endOffset": 1942
        },
        "values": [{
          "value": {
          },
          "count": 4
        }],
        "children": [{
          "sourcePosition": {
            "line": 68,
            "column": 25,
            "currentOffset": 1895,
            "endOffset": 1900
          },
          "values": [{
            "value": {
            },
            "count": 4
          }]
        }, {
          "sourcePosition": {
            "line": 68,
            "column": 37,
            "currentOffset": 1907,
            "endOffset": 1942
          },
          "values": [{
            "value": {
            },
            "count": 4
          }],
          "children": [{
            "sourcePosition": {
              "line": 68,
              "column": 37,
              "currentOffset": 1907,
              "endOffset": 1922
            },
            "values": [{
              "value": {
              },
              "count": 4
            }],
            "children": [{
              "sourcePosition": {
                "line": 68,
                "column": 37,
                "currentOffset": 1907,
                "endOffset": 1916
              },
              "values": [{
                "value": {
                },
                "count": 4
              }]
            }]
          }, {
            "sourcePosition": {
              "line": 68,
              "column": 57,
              "currentOffset": 1927,
              "endOffset": 1942
            },
            "values": [{
              "value": {
              },
              "count": 4
            }],
            "children": [{
              "sourcePosition": {
                "line": 68,
                "column": 57,
                "currentOffset": 1927,
                "endOffset": 1938
              },
              "values": [{
                "value": {
                },
                "count": 4
              }],
              "children": [{
                "sourcePosition": {
                  "line": 68,
                  "column": 57,
                  "currentOffset": 1927,
                  "endOffset": 1933
                },
                "values": [{
                  "value": {
                  },
                  "count": 4
                }]
              }]
            }]
          }]
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 71,
      "column": 30,
      "currentOffset": 1996,
      "endOffset": 2289
    },
    "values": [{
      "value": {
        "boolValue": true
      },
      "count": 1
    }, {
      "value": {
        "boolValue": false
      },
      "count": 3
    }],
    "children": [{
      "sourcePosition": {
        "line": 71,
        "column": 30,
        "currentOffset": 1996,
        "endOffset": 2228
      },
      "values": [{
        "value": {
          "boolValue": true
        },
        "count": 1
      }, {
        "value": {
          "boolValue": false
        },
        "count": 3
      }],
      "children": [{
        "sourcePosition": {
          "line": 71,
          "column": 30,
          "currentOffset": 1996,
          "endOffset": 2170
        },
        "values": [{
          "value": {
            "boolValue": true
          },
          "count": 1
        }, {
          "value": {
            "boolValue": false
          },
          "count": 3
        }],
        "children": [{
          "sourcePosition": {
            "line": 71,
            "column": 30,
            "currentOffset": 1996,
            "endOffset": 2116
          },
          "values": [{
            "value": {
              "boolValue": true
            },
            "count": 1
          }, {
            "value": {
              "boolValue": false
            },
            "count": 3
          }],
          "children": [{
            "sourcePosition": {
              "line": 71,
              "column": 30,
              "currentOffset": 1996,
              "endOffset": 2062
            },
            "values": [{
              "value": {
                "boolValue": true
              },
              "count": 1
            }, {
              "value": {
                "boolValue": false
              },
              "count": 3
            }],
            "children": [{
              "sourcePosition": {
                "line": 71,
                "column": 30,
                "currentOffset": 1996,
                "endOffset": 2001
              },
              "values": [{
                "value": {
                  "boolValue": true
                },
                "count": 4
              }]
            }, {
              "sourcePosition": {
                "line": 72,
                "column": 20,
                "currentOffset": 2025,
                "endOffset": 2062
              },
              "values": [{
                "value": {
                  "boolValue": true
                },
                "count": 1
              }, {
                "value": {
                  "boolValue": false
                },
                "count": 3
              }],
              "children": [{
                "sourcePosition": {
                  "line": 72,
                  "column": 20,
                  "currentOffset": 2025,
                  "endOffset": 2042
                },
                "values": [{
                  "value": {
                    "stringValue": "author"
                  },
                  "count": 1
                }, {
                  "value": {
                    "stringValue": "otherPeople"
                  },
                  "count": 3
                }],
                "children": [{
                  "sourcePosition": {
                    "line": 72,
                    "column": 20,
                    "currentOffset": 2025,
                    "endOffset": 2036
                  },
                  "values": [{
                    "value": {
                      "mapValue": {
                        "fields": {
                          "published": {
                            "boolValue": false
                          },
                          "title": {
                            "stringValue": "Lorem Ipsum"
                          },
                          "content": {
                            "stringValue": "lorem ipsum dolor sit amet"
                          },
                          "uid": {
                            "stringValue": "author"
                          },
                          "category": {
                            "stringValue": "any"
                          },
                          "createdAt": {
                            "timestampValue": "2021-04-05T07:30:58.712Z"
                          }
                        }
                      }
                    },
                    "count": 1
                  }, {
                    "value": {
                      "mapValue": {
                        "fields": {
                          "published": {
                            "boolValue": false
                          },
                          "title": {
                            "stringValue": "Lorem Ipsum"
                          },
                          "content": {
                            "stringValue": "lorem ipsum dolor sit amet"
                          },
                          "uid": {
                            "stringValue": "otherPeople"
                          },
                          "category": {
                            "stringValue": "any"
                          },
                          "createdAt": {
                            "timestampValue": "2021-04-05T07:30:59.112Z"
                          }
                        }
                      }
                    },
                    "count": 1
                  }, {
                    "value": {
                      "mapValue": {
                        "fields": {
                          "published": {
                            "boolValue": false
                          },
                          "title": {
                            "stringValue": "Lorem Ipsum"
                          },
                          "content": {
                            "stringValue": "lorem ipsum dolor sit amet"
                          },
                          "uid": {
                            "stringValue": "otherPeople"
                          },
                          "createdAt": {
                            "timestampValue": "1970-01-01T00:00:01Z"
                          },
                          "category": {
                            "stringValue": "any"
                          }
                        }
                      }
                    },
                    "count": 1
                  }, {
                    "value": {
                      "mapValue": {
                        "fields": {
                          "published": {
                            "boolValue": true
                          },
                          "title": {
                            "stringValue": "Lorem Ipsum"
                          },
                          "content": {
                            "stringValue": "lorem ipsum dolor sit amet"
                          },
                          "uid": {
                            "stringValue": "otherPeople"
                          },
                          "createdAt": {
                            "timestampValue": "1970-01-01T00:00:01Z"
                          },
                          "category": {
                            "stringValue": "any"
                          }
                        }
                      }
                    },
                    "count": 1
                  }]
                }]
              }, {
                "sourcePosition": {
                  "line": 72,
                  "column": 42,
                  "currentOffset": 2047,
                  "endOffset": 2062
                },
                "values": [{
                  "value": {
                    "stringValue": "author"
                  },
                  "count": 4
                }],
                "children": [{
                  "sourcePosition": {
                    "line": 72,
                    "column": 42,
                    "currentOffset": 2047,
                    "endOffset": 2058
                  },
                  "values": [{
                    "value": {
                      "mapValue": {
                        "fields": {
                          "uid": {
                            "stringValue": "author"
                          },
                          "token": {
                            "mapValue": {
                              "fields": {
                                "iss": {
                                  "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                },
                                "aud": {
                                  "stringValue": "objects-omsistuff"
                                },
                                "iat": {
                                  "intValue": "0"
                                },
                                "exp": {
                                  "intValue": "3600"
                                },
                                "auth_time": {
                                  "intValue": "0"
                                },
                                "sub": {
                                  "stringValue": "author"
                                },
                                "user_id": {
                                  "stringValue": "author"
                                },
                                "firebase": {
                                  "mapValue": {
                                    "fields": {
                                      "sign_in_provider": {
                                        "stringValue": "custom"
                                      },
                                      "identities": {
                                        "mapValue": {
                                        }
                                      }
                                    }
                                  }
                                },
                                "email": {
                                  "stringValue": "alice@example.com"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "count": 4
                  }],
                  "children": [{
                    "sourcePosition": {
                      "line": 72,
                      "column": 42,
                      "currentOffset": 2047,
                      "endOffset": 2053
                    },
                    "values": [{
                      "value": {
                        "mapValue": {
                          "fields": {
                            "time": {
                              "timestampValue": "2021-04-05T07:30:58.712Z"
                            },
                            "auth": {
                              "mapValue": {
                                "fields": {
                                  "uid": {
                                    "stringValue": "author"
                                  },
                                  "token": {
                                    "mapValue": {
                                      "fields": {
                                        "iss": {
                                          "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                        },
                                        "aud": {
                                          "stringValue": "objects-omsistuff"
                                        },
                                        "iat": {
                                          "intValue": "0"
                                        },
                                        "exp": {
                                          "intValue": "3600"
                                        },
                                        "auth_time": {
                                          "intValue": "0"
                                        },
                                        "sub": {
                                          "stringValue": "author"
                                        },
                                        "user_id": {
                                          "stringValue": "author"
                                        },
                                        "firebase": {
                                          "mapValue": {
                                            "fields": {
                                              "sign_in_provider": {
                                                "stringValue": "custom"
                                              },
                                              "identities": {
                                                "mapValue": {
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "email": {
                                          "stringValue": "alice@example.com"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "headers": {
                              "mapValue": {
                              }
                            },
                            "inTransaction": {
                              "boolValue": true
                            },
                            "path": {
                              "pathValue": {
                                "segments": [{
                                  "simple": "databases"
                                }, {
                                  "simple": "(default)"
                                }, {
                                  "simple": "documents"
                                }, {
                                  "simple": "articles"
                                }, {
                                  "simple": "articleId"
                                }]
                              }
                            },
                            "transforms": {
                              "listValue": {
                                "values": [{
                                  "stringValue": "createdAt"
                                }]
                              }
                            },
                            "writeFields": {
                              "listValue": {
                                "values": [{
                                  "stringValue": "createdAt"
                                }]
                              }
                            },
                            "readFields": {
                              "nullValue": null
                            },
                            "resource": {
                              "mapValue": {
                                "fields": {
                                  "data": {
                                    "mapValue": {
                                      "fields": {
                                        "published": {
                                          "boolValue": false
                                        },
                                        "title": {
                                          "stringValue": "Lorem Ipsum"
                                        },
                                        "content": {
                                          "stringValue": "lorem ipsum dolor sit amet"
                                        },
                                        "uid": {
                                          "stringValue": "author"
                                        },
                                        "category": {
                                          "stringValue": "any"
                                        },
                                        "createdAt": {
                                          "timestampValue": "2021-04-05T07:30:58.712Z"
                                        }
                                      }
                                    }
                                  },
                                  "__name__": {
                                    "pathValue": {
                                      "segments": [{
                                        "simple": "databases"
                                      }, {
                                        "simple": "(default)"
                                      }, {
                                        "simple": "documents"
                                      }, {
                                        "simple": "articles"
                                      }, {
                                        "simple": "articleId"
                                      }]
                                    }
                                  },
                                  "id": {
                                    "stringValue": "articleId"
                                  }
                                }
                              }
                            },
                            "method": {
                              "stringValue": "create"
                            }
                          }
                        }
                      },
                      "count": 1
                    }, {
                      "value": {
                        "mapValue": {
                          "fields": {
                            "time": {
                              "timestampValue": "2021-04-05T07:30:59.112Z"
                            },
                            "auth": {
                              "mapValue": {
                                "fields": {
                                  "uid": {
                                    "stringValue": "author"
                                  },
                                  "token": {
                                    "mapValue": {
                                      "fields": {
                                        "iss": {
                                          "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                        },
                                        "aud": {
                                          "stringValue": "objects-omsistuff"
                                        },
                                        "iat": {
                                          "intValue": "0"
                                        },
                                        "exp": {
                                          "intValue": "3600"
                                        },
                                        "auth_time": {
                                          "intValue": "0"
                                        },
                                        "sub": {
                                          "stringValue": "author"
                                        },
                                        "user_id": {
                                          "stringValue": "author"
                                        },
                                        "firebase": {
                                          "mapValue": {
                                            "fields": {
                                              "sign_in_provider": {
                                                "stringValue": "custom"
                                              },
                                              "identities": {
                                                "mapValue": {
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "email": {
                                          "stringValue": "alice@example.com"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "headers": {
                              "mapValue": {
                              }
                            },
                            "inTransaction": {
                              "boolValue": true
                            },
                            "path": {
                              "pathValue": {
                                "segments": [{
                                  "simple": "databases"
                                }, {
                                  "simple": "(default)"
                                }, {
                                  "simple": "documents"
                                }, {
                                  "simple": "articles"
                                }, {
                                  "simple": "articleId"
                                }]
                              }
                            },
                            "transforms": {
                              "listValue": {
                                "values": [{
                                  "stringValue": "createdAt"
                                }]
                              }
                            },
                            "writeFields": {
                              "listValue": {
                                "values": [{
                                  "stringValue": "createdAt"
                                }]
                              }
                            },
                            "readFields": {
                              "nullValue": null
                            },
                            "resource": {
                              "mapValue": {
                                "fields": {
                                  "data": {
                                    "mapValue": {
                                      "fields": {
                                        "published": {
                                          "boolValue": false
                                        },
                                        "title": {
                                          "stringValue": "Lorem Ipsum"
                                        },
                                        "content": {
                                          "stringValue": "lorem ipsum dolor sit amet"
                                        },
                                        "uid": {
                                          "stringValue": "otherPeople"
                                        },
                                        "category": {
                                          "stringValue": "any"
                                        },
                                        "createdAt": {
                                          "timestampValue": "2021-04-05T07:30:59.112Z"
                                        }
                                      }
                                    }
                                  },
                                  "__name__": {
                                    "pathValue": {
                                      "segments": [{
                                        "simple": "databases"
                                      }, {
                                        "simple": "(default)"
                                      }, {
                                        "simple": "documents"
                                      }, {
                                        "simple": "articles"
                                      }, {
                                        "simple": "articleId"
                                      }]
                                    }
                                  },
                                  "id": {
                                    "stringValue": "articleId"
                                  }
                                }
                              }
                            },
                            "method": {
                              "stringValue": "create"
                            }
                          }
                        }
                      },
                      "count": 1
                    }, {
                      "value": {
                        "mapValue": {
                          "fields": {
                            "time": {
                              "timestampValue": "2021-04-05T07:30:59.179Z"
                            },
                            "auth": {
                              "mapValue": {
                                "fields": {
                                  "uid": {
                                    "stringValue": "author"
                                  },
                                  "token": {
                                    "mapValue": {
                                      "fields": {
                                        "iss": {
                                          "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                        },
                                        "aud": {
                                          "stringValue": "objects-omsistuff"
                                        },
                                        "iat": {
                                          "intValue": "0"
                                        },
                                        "exp": {
                                          "intValue": "3600"
                                        },
                                        "auth_time": {
                                          "intValue": "0"
                                        },
                                        "sub": {
                                          "stringValue": "author"
                                        },
                                        "user_id": {
                                          "stringValue": "author"
                                        },
                                        "firebase": {
                                          "mapValue": {
                                            "fields": {
                                              "sign_in_provider": {
                                                "stringValue": "custom"
                                              },
                                              "identities": {
                                                "mapValue": {
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "email": {
                                          "stringValue": "alice@example.com"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "headers": {
                              "mapValue": {
                              }
                            },
                            "inTransaction": {
                              "boolValue": true
                            },
                            "path": {
                              "pathValue": {
                                "segments": [{
                                  "simple": "databases"
                                }, {
                                  "simple": "(default)"
                                }, {
                                  "simple": "documents"
                                }, {
                                  "simple": "articles"
                                }, {
                                  "simple": "articleId"
                                }]
                              }
                            },
                            "transforms": {
                              "nullValue": null
                            },
                            "writeFields": {
                              "nullValue": null
                            },
                            "readFields": {
                              "nullValue": null
                            },
                            "resource": {
                              "mapValue": {
                                "fields": {
                                  "data": {
                                    "mapValue": {
                                      "fields": {
                                        "published": {
                                          "boolValue": false
                                        },
                                        "title": {
                                          "stringValue": "Lorem Ipsum"
                                        },
                                        "content": {
                                          "stringValue": "lorem ipsum dolor sit amet"
                                        },
                                        "uid": {
                                          "stringValue": "otherPeople"
                                        },
                                        "createdAt": {
                                          "timestampValue": "1970-01-01T00:00:01Z"
                                        },
                                        "category": {
                                          "stringValue": "any"
                                        }
                                      }
                                    }
                                  },
                                  "__name__": {
                                    "pathValue": {
                                      "segments": [{
                                        "simple": "databases"
                                      }, {
                                        "simple": "(default)"
                                      }, {
                                        "simple": "documents"
                                      }, {
                                        "simple": "articles"
                                      }, {
                                        "simple": "articleId"
                                      }]
                                    }
                                  },
                                  "id": {
                                    "stringValue": "articleId"
                                  }
                                }
                              }
                            },
                            "method": {
                              "stringValue": "create"
                            }
                          }
                        }
                      },
                      "count": 1
                    }, {
                      "value": {
                        "mapValue": {
                          "fields": {
                            "time": {
                              "timestampValue": "2021-04-05T07:30:59.213Z"
                            },
                            "auth": {
                              "mapValue": {
                                "fields": {
                                  "uid": {
                                    "stringValue": "author"
                                  },
                                  "token": {
                                    "mapValue": {
                                      "fields": {
                                        "iss": {
                                          "stringValue": "https://securetoken.google.com/objects-omsistuff"
                                        },
                                        "aud": {
                                          "stringValue": "objects-omsistuff"
                                        },
                                        "iat": {
                                          "intValue": "0"
                                        },
                                        "exp": {
                                          "intValue": "3600"
                                        },
                                        "auth_time": {
                                          "intValue": "0"
                                        },
                                        "sub": {
                                          "stringValue": "author"
                                        },
                                        "user_id": {
                                          "stringValue": "author"
                                        },
                                        "firebase": {
                                          "mapValue": {
                                            "fields": {
                                              "sign_in_provider": {
                                                "stringValue": "custom"
                                              },
                                              "identities": {
                                                "mapValue": {
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "email": {
                                          "stringValue": "alice@example.com"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "headers": {
                              "mapValue": {
                              }
                            },
                            "inTransaction": {
                              "boolValue": true
                            },
                            "path": {
                              "pathValue": {
                                "segments": [{
                                  "simple": "databases"
                                }, {
                                  "simple": "(default)"
                                }, {
                                  "simple": "documents"
                                }, {
                                  "simple": "articles"
                                }, {
                                  "simple": "articleId"
                                }]
                              }
                            },
                            "transforms": {
                              "nullValue": null
                            },
                            "writeFields": {
                              "nullValue": null
                            },
                            "readFields": {
                              "nullValue": null
                            },
                            "resource": {
                              "mapValue": {
                                "fields": {
                                  "data": {
                                    "mapValue": {
                                      "fields": {
                                        "published": {
                                          "boolValue": true
                                        },
                                        "title": {
                                          "stringValue": "Lorem Ipsum"
                                        },
                                        "content": {
                                          "stringValue": "lorem ipsum dolor sit amet"
                                        },
                                        "uid": {
                                          "stringValue": "otherPeople"
                                        },
                                        "createdAt": {
                                          "timestampValue": "1970-01-01T00:00:01Z"
                                        },
                                        "category": {
                                          "stringValue": "any"
                                        }
                                      }
                                    }
                                  },
                                  "__name__": {
                                    "pathValue": {
                                      "segments": [{
                                        "simple": "databases"
                                      }, {
                                        "simple": "(default)"
                                      }, {
                                        "simple": "documents"
                                      }, {
                                        "simple": "articles"
                                      }, {
                                        "simple": "articleId"
                                      }]
                                    }
                                  },
                                  "id": {
                                    "stringValue": "articleId"
                                  }
                                }
                              }
                            },
                            "method": {
                              "stringValue": "create"
                            }
                          }
                        }
                      },
                      "count": 1
                    }]
                  }]
                }]
              }]
            }]
          }, {
            "sourcePosition": {
              "line": 73,
              "column": 20,
              "currentOffset": 2084,
              "endOffset": 2116
            },
            "values": [{
              "value": {
                "boolValue": true
              },
              "count": 1
            }, {
              "value": {
              },
              "count": 3
            }],
            "children": [{
              "sourcePosition": {
                "line": 73,
                "column": 20,
                "currentOffset": 2084,
                "endOffset": 2107
              },
              "values": [{
                "value": {
                  "boolValue": false
                },
                "count": 1
              }, {
                "value": {
                },
                "count": 3
              }],
              "children": [{
                "sourcePosition": {
                  "line": 73,
                  "column": 20,
                  "currentOffset": 2084,
                  "endOffset": 2095
                },
                "values": [{
                  "value": {
                    "mapValue": {
                      "fields": {
                        "published": {
                          "boolValue": false
                        },
                        "title": {
                          "stringValue": "Lorem Ipsum"
                        },
                        "content": {
                          "stringValue": "lorem ipsum dolor sit amet"
                        },
                        "uid": {
                          "stringValue": "author"
                        },
                        "category": {
                          "stringValue": "any"
                        },
                        "createdAt": {
                          "timestampValue": "2021-04-05T07:30:58.712Z"
                        }
                      }
                    }
                  },
                  "count": 1
                }, {
                  "value": {
                  },
                  "count": 3
                }]
              }]
            }]
          }]
        }, {
          "sourcePosition": {
            "line": 74,
            "column": 20,
            "currentOffset": 2138,
            "endOffset": 2170
          },
          "values": [{
            "value": {
              "boolValue": true
            },
            "count": 1
          }, {
            "value": {
            },
            "count": 3
          }],
          "children": [{
            "sourcePosition": {
              "line": 74,
              "column": 20,
              "currentOffset": 2138,
              "endOffset": 2162
            },
            "values": [{
              "value": {
                "intValue": "11"
              },
              "count": 1
            }, {
              "value": {
              },
              "count": 3
            }],
            "children": [{
              "sourcePosition": {
                "line": 74,
                "column": 20,
                "currentOffset": 2138,
                "endOffset": 2157
              },
              "values": [{
                "value": {
                  "stringValue": "Lorem Ipsum"
                },
                "count": 1
              }, {
                "value": {
                },
                "count": 3
              }],
              "children": [{
                "sourcePosition": {
                  "line": 74,
                  "column": 20,
                  "currentOffset": 2138,
                  "endOffset": 2149
                },
                "values": [{
                  "value": {
                    "mapValue": {
                      "fields": {
                        "published": {
                          "boolValue": false
                        },
                        "title": {
                          "stringValue": "Lorem Ipsum"
                        },
                        "content": {
                          "stringValue": "lorem ipsum dolor sit amet"
                        },
                        "uid": {
                          "stringValue": "author"
                        },
                        "category": {
                          "stringValue": "any"
                        },
                        "createdAt": {
                          "timestampValue": "2021-04-05T07:30:58.712Z"
                        }
                      }
                    }
                  },
                  "count": 1
                }, {
                  "value": {
                  },
                  "count": 3
                }]
              }]
            }]
          }]
        }]
      }, {
        "sourcePosition": {
          "line": 75,
          "column": 20,
          "currentOffset": 2192,
          "endOffset": 2228
        },
        "values": [{
          "value": {
            "boolValue": true
          },
          "count": 1
        }, {
          "value": {
          },
          "count": 3
        }],
        "children": [{
          "sourcePosition": {
            "line": 75,
            "column": 20,
            "currentOffset": 2192,
            "endOffset": 2218
          },
          "values": [{
            "value": {
              "intValue": "26"
            },
            "count": 1
          }, {
            "value": {
            },
            "count": 3
          }],
          "children": [{
            "sourcePosition": {
              "line": 75,
              "column": 20,
              "currentOffset": 2192,
              "endOffset": 2213
            },
            "values": [{
              "value": {
                "stringValue": "lorem ipsum dolor sit amet"
              },
              "count": 1
            }, {
              "value": {
              },
              "count": 3
            }],
            "children": [{
              "sourcePosition": {
                "line": 75,
                "column": 20,
                "currentOffset": 2192,
                "endOffset": 2203
              },
              "values": [{
                "value": {
                  "mapValue": {
                    "fields": {
                      "published": {
                        "boolValue": false
                      },
                      "title": {
                        "stringValue": "Lorem Ipsum"
                      },
                      "content": {
                        "stringValue": "lorem ipsum dolor sit amet"
                      },
                      "uid": {
                        "stringValue": "author"
                      },
                      "category": {
                        "stringValue": "any"
                      },
                      "createdAt": {
                        "timestampValue": "2021-04-05T07:30:58.712Z"
                      }
                    }
                  }
                },
                "count": 1
              }, {
                "value": {
                },
                "count": 3
              }]
            }]
          }]
        }]
      }]
    }, {
      "sourcePosition": {
        "line": 76,
        "column": 20,
        "currentOffset": 2250,
        "endOffset": 2289
      },
      "values": [{
        "value": {
          "boolValue": true
        },
        "count": 1
      }, {
        "value": {
        },
        "count": 3
      }],
      "children": [{
        "sourcePosition": {
          "line": 76,
          "column": 20,
          "currentOffset": 2250,
          "endOffset": 2273
        },
        "values": [{
          "value": {
            "timestampValue": "2021-04-05T07:30:58.712Z"
          },
          "count": 1
        }, {
          "value": {
          },
          "count": 3
        }],
        "children": [{
          "sourcePosition": {
            "line": 76,
            "column": 20,
            "currentOffset": 2250,
            "endOffset": 2261
          },
          "values": [{
            "value": {
              "mapValue": {
                "fields": {
                  "published": {
                    "boolValue": false
                  },
                  "title": {
                    "stringValue": "Lorem Ipsum"
                  },
                  "content": {
                    "stringValue": "lorem ipsum dolor sit amet"
                  },
                  "uid": {
                    "stringValue": "author"
                  },
                  "category": {
                    "stringValue": "any"
                  },
                  "createdAt": {
                    "timestampValue": "2021-04-05T07:30:58.712Z"
                  }
                }
              }
            },
            "count": 1
          }, {
            "value": {
            },
            "count": 3
          }]
        }]
      }, {
        "sourcePosition": {
          "line": 76,
          "column": 48,
          "currentOffset": 2278,
          "endOffset": 2289
        },
        "values": [{
          "value": {
            "timestampValue": "2021-04-05T07:30:58.712Z"
          },
          "count": 1
        }, {
          "value": {
          },
          "count": 3
        }],
        "children": [{
          "sourcePosition": {
            "line": 76,
            "column": 48,
            "currentOffset": 2278,
            "endOffset": 2284
          },
          "values": [{
            "value": {
              "mapValue": {
                "fields": {
                  "time": {
                    "timestampValue": "2021-04-05T07:30:58.712Z"
                  },
                  "auth": {
                    "mapValue": {
                      "fields": {
                        "uid": {
                          "stringValue": "author"
                        },
                        "token": {
                          "mapValue": {
                            "fields": {
                              "iss": {
                                "stringValue": "https://securetoken.google.com/objects-omsistuff"
                              },
                              "aud": {
                                "stringValue": "objects-omsistuff"
                              },
                              "iat": {
                                "intValue": "0"
                              },
                              "exp": {
                                "intValue": "3600"
                              },
                              "auth_time": {
                                "intValue": "0"
                              },
                              "sub": {
                                "stringValue": "author"
                              },
                              "user_id": {
                                "stringValue": "author"
                              },
                              "firebase": {
                                "mapValue": {
                                  "fields": {
                                    "sign_in_provider": {
                                      "stringValue": "custom"
                                    },
                                    "identities": {
                                      "mapValue": {
                                      }
                                    }
                                  }
                                }
                              },
                              "email": {
                                "stringValue": "alice@example.com"
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "headers": {
                    "mapValue": {
                    }
                  },
                  "inTransaction": {
                    "boolValue": true
                  },
                  "path": {
                    "pathValue": {
                      "segments": [{
                        "simple": "databases"
                      }, {
                        "simple": "(default)"
                      }, {
                        "simple": "documents"
                      }, {
                        "simple": "articles"
                      }, {
                        "simple": "articleId"
                      }]
                    }
                  },
                  "transforms": {
                    "listValue": {
                      "values": [{
                        "stringValue": "createdAt"
                      }]
                    }
                  },
                  "writeFields": {
                    "listValue": {
                      "values": [{
                        "stringValue": "createdAt"
                      }]
                    }
                  },
                  "readFields": {
                    "nullValue": null
                  },
                  "resource": {
                    "mapValue": {
                      "fields": {
                        "data": {
                          "mapValue": {
                            "fields": {
                              "published": {
                                "boolValue": false
                              },
                              "title": {
                                "stringValue": "Lorem Ipsum"
                              },
                              "content": {
                                "stringValue": "lorem ipsum dolor sit amet"
                              },
                              "uid": {
                                "stringValue": "author"
                              },
                              "category": {
                                "stringValue": "any"
                              },
                              "createdAt": {
                                "timestampValue": "2021-04-05T07:30:58.712Z"
                              }
                            }
                          }
                        },
                        "__name__": {
                          "pathValue": {
                            "segments": [{
                              "simple": "databases"
                            }, {
                              "simple": "(default)"
                            }, {
                              "simple": "documents"
                            }, {
                              "simple": "articles"
                            }, {
                              "simple": "articleId"
                            }]
                          }
                        },
                        "id": {
                          "stringValue": "articleId"
                        }
                      }
                    }
                  },
                  "method": {
                    "stringValue": "create"
                  }
                }
              }
            },
            "count": 1
          }, {
            "value": {
            },
            "count": 3
          }]
        }]
      }]
    }]
  }, {
    "sourcePosition": {
      "line": 79,
      "column": 20,
      "currentOffset": 2340,
      "endOffset": 2806
    },
    "children": [{
      "sourcePosition": {
        "line": 79,
        "column": 20,
        "currentOffset": 2340,
        "endOffset": 2758
      },
      "children": [{
        "sourcePosition": {
          "line": 80,
          "column": 21,
          "currentOffset": 2363,
          "endOffset": 2671
        },
        "children": [{
          "sourcePosition": {
            "line": 80,
            "column": 21,
            "currentOffset": 2363,
            "endOffset": 2606
          },
          "children": [{
            "sourcePosition": {
              "line": 80,
              "column": 21,
              "currentOffset": 2363,
              "endOffset": 2544
            },
            "children": [{
              "sourcePosition": {
                "line": 80,
                "column": 21,
                "currentOffset": 2363,
                "endOffset": 2486
              },
              "children": [{
                "sourcePosition": {
                  "line": 80,
                  "column": 21,
                  "currentOffset": 2363,
                  "endOffset": 2426
                },
                "children": [{
                  "sourcePosition": {
                    "line": 80,
                    "column": 21,
                    "currentOffset": 2363,
                    "endOffset": 2368
                  }
                }, {
                  "sourcePosition": {
                    "line": 81,
                    "column": 24,
                    "currentOffset": 2396,
                    "endOffset": 2426
                  },
                  "children": [{
                    "sourcePosition": {
                      "line": 81,
                      "column": 36,
                      "currentOffset": 2408,
                      "endOffset": 2426
                    }
                  }]
                }]
              }, {
                "sourcePosition": {
                  "line": 82,
                  "column": 24,
                  "currentOffset": 2454,
                  "endOffset": 2486
                },
                "children": [{
                  "sourcePosition": {
                    "line": 82,
                    "column": 24,
                    "currentOffset": 2454,
                    "endOffset": 2477
                  },
                  "children": [{
                    "sourcePosition": {
                      "line": 82,
                      "column": 24,
                      "currentOffset": 2454,
                      "endOffset": 2465
                    }
                  }]
                }]
              }]
            }, {
              "sourcePosition": {
                "line": 83,
                "column": 24,
                "currentOffset": 2512,
                "endOffset": 2544
              },
              "children": [{
                "sourcePosition": {
                  "line": 83,
                  "column": 24,
                  "currentOffset": 2512,
                  "endOffset": 2536
                },
                "children": [{
                  "sourcePosition": {
                    "line": 83,
                    "column": 24,
                    "currentOffset": 2512,
                    "endOffset": 2531
                  },
                  "children": [{
                    "sourcePosition": {
                      "line": 83,
                      "column": 24,
                      "currentOffset": 2512,
                      "endOffset": 2523
                    }
                  }]
                }]
              }]
            }]
          }, {
            "sourcePosition": {
              "line": 84,
              "column": 24,
              "currentOffset": 2570,
              "endOffset": 2606
            },
            "children": [{
              "sourcePosition": {
                "line": 84,
                "column": 24,
                "currentOffset": 2570,
                "endOffset": 2596
              },
              "children": [{
                "sourcePosition": {
                  "line": 84,
                  "column": 24,
                  "currentOffset": 2570,
                  "endOffset": 2591
                },
                "children": [{
                  "sourcePosition": {
                    "line": 84,
                    "column": 24,
                    "currentOffset": 2570,
                    "endOffset": 2581
                  }
                }]
              }]
            }]
          }]
        }, {
          "sourcePosition": {
            "line": 85,
            "column": 24,
            "currentOffset": 2632,
            "endOffset": 2671
          },
          "children": [{
            "sourcePosition": {
              "line": 85,
              "column": 24,
              "currentOffset": 2632,
              "endOffset": 2655
            },
            "children": [{
              "sourcePosition": {
                "line": 85,
                "column": 24,
                "currentOffset": 2632,
                "endOffset": 2643
              }
            }]
          }, {
            "sourcePosition": {
              "line": 85,
              "column": 52,
              "currentOffset": 2660,
              "endOffset": 2671
            },
            "children": [{
              "sourcePosition": {
                "line": 85,
                "column": 52,
                "currentOffset": 2660,
                "endOffset": 2666
              }
            }]
          }]
        }]
      }, {
        "sourcePosition": {
          "line": 86,
          "column": 24,
          "currentOffset": 2697,
          "endOffset": 2758
        },
        "children": [{
          "sourcePosition": {
            "line": 86,
            "column": 24,
            "currentOffset": 2697,
            "endOffset": 2708
          },
          "children": [{
            "sourcePosition": {
              "line": 86,
              "column": 24,
              "currentOffset": 2697,
              "endOffset": 2703
            }
          }]
        }, {
          "sourcePosition": {
            "line": 86,
            "column": 39,
            "currentOffset": 2712,
            "endOffset": 2758
          },
          "children": [{
            "sourcePosition": {
              "line": 86,
              "column": 39,
              "currentOffset": 2712,
              "endOffset": 2733
            },
            "children": [{
              "sourcePosition": {
                "line": 86,
                "column": 39,
                "currentOffset": 2712,
                "endOffset": 2721
              }
            }]
          }, {
            "sourcePosition": {
              "line": 86,
              "column": 64,
              "currentOffset": 2737,
              "endOffset": 2758
            }
          }]
        }]
      }]
    }, {
      "sourcePosition": {
        "line": 88,
        "column": 20,
        "currentOffset": 2800,
        "endOffset": 2806
      }
    }]
  }, {
    "sourcePosition": {
      "line": 90,
      "column": 30,
      "currentOffset": 2842,
      "endOffset": 2906
    },
    "children": [{
      "sourcePosition": {
        "line": 90,
        "column": 30,
        "currentOffset": 2842,
        "endOffset": 2847
      }
    }, {
      "sourcePosition": {
        "line": 91,
        "column": 20,
        "currentOffset": 2871,
        "endOffset": 2906
      },
      "children": [{
        "sourcePosition": {
          "line": 91,
          "column": 20,
          "currentOffset": 2871,
          "endOffset": 2886
        },
        "children": [{
          "sourcePosition": {
            "line": 91,
            "column": 20,
            "currentOffset": 2871,
            "endOffset": 2880
          }
        }]
      }, {
        "sourcePosition": {
          "line": 91,
          "column": 40,
          "currentOffset": 2891,
          "endOffset": 2906
        },
        "children": [{
          "sourcePosition": {
            "line": 91,
            "column": 40,
            "currentOffset": 2891,
            "endOffset": 2902
          },
          "children": [{
            "sourcePosition": {
              "line": 91,
              "column": 40,
              "currentOffset": 2891,
              "endOffset": 2897
            }
          }]
        }]
      }]
    }]
  }]
};

const REPORT_LIMIT_SIZE = 15

window.onload = function() {
  if (data.rules.files.length == 1) {
    document.body.appendChild(buildFormattedReport(data.report || [], data.rules.files[0].content))
  } else {
    document.body.appendChild(document.createTextNode('Only single-file rules supported. ' +
    'If you encounter this please visit https://github.com/firebase/firebase-tools/issues'))
  }
};

/**
 * Builds the html block with span elements for rule visualization.
 *
 * @param expressionList The list of expression blocks.
 * @param ruleString The full text of the rules with newlines and special characters escaped.
 * @return A <pre> html element with <span></span> around expressions and subexpressions within
 *     .write, .read, and .validate tokens so that they can be selected.
 */
function buildFormattedReport(expressionList, ruleString) {
  const elements = Object.keys(expressionList).map((key) => {
    return mapExpressionBlock(expressionList[key], ruleString)
  })
  const withText = interpolateTextNodes(
    elements,
    ruleString,
    0,
    ruleString.length
  )
  var preElement = document.createElement('pre')
  withText.forEach((element) => preElement.appendChild(element.element))
  return preElement
}

/**
 * Traverses an expression block.
 *
 * Each expression needs to be wrapped in a span and so it's children need to be immediately
 * resolved so they can be added to the element.
 *
 * @param expressionBlock The current recursive chunk of expression data.
 * @param ruleString The full text of the rules with newlines and special characters escaped.
 * @return A single object with at least the keys start, end, and element. Element is the span
 *    element for that [sub]expression. The span element should have all it's children
 *    already added.
 */
function mapExpressionBlock(expressionBlock, ruleString) {
  const start = expressionBlock.sourcePosition.currentOffset
  const end = expressionBlock.sourcePosition.endOffset + 1
  const onlyChildSpans = (expressionBlock.children || []).map(
    (child) => mapExpressionBlock(child, ruleString)
  )
  const allChildren = interpolateTextNodes(
    onlyChildSpans,
    ruleString,
    start,
    end,
    true
  )
  var span = document.createElement('span')
  allChildren.forEach((child) => {
    span.appendChild(child.element)
  })
  span.classList.add('coverage-expr')
  span.title = buildValueString(expressionBlock.values);
  return {
    element: span,
    start: start,
    end: end
  }
}

/**
 * The formatted report data has information about where subexpression are located. It does not,
 * however, have information about text around these expressions. This function takes a formatted
 * list of spans (representing expressions) and puts surrounding text into text elements and
 * returns the list of all elements in that given text-area.
 *
 * @param objs the list of spans to have their bounds interpolated. Each element in the list should
 *    formatted with the keys start, end, and element.
 * @param ruleString The full text of the rules with newlines and special characters escaped.
 * @param optStart An optional start index to start gathering text-elements from.
 * @param optEnd An optional end index to finish gathering text-elements at.
 * @param whether to remove newlines from the text values.
 * @return An interpolated list with all indices from start to end of the ruleString being
 *    included in either a span or a text element.
 */
function interpolateTextNodes(objs, ruleString, start = null, end = null, removeNewLines = false) {
  // Arrays so null objects aren't appended (options)
  const expressionStart = start !== null ? [{'end': start}] : []
  const expressionEnd = end !== null ? [{'start': end}] : []
  const sortedInnerBlocks = (objs || []).sort((a, b) => (a['start'] - b['start']))
  const blocksWithBounds = [].concat(expressionStart, sortedInnerBlocks, expressionEnd)
  const interpolatedBlocks = blocksWithBounds.reduce((allChildren, child, idx) => {
    if (allChildren && allChildren.length) {
      const lastEnd = allChildren[allChildren.length - 1]['end']
      const thisStart = child['start']
      // This is an array so that we don't append null objects
      if (lastEnd < thisStart) {
        const text = ruleString.substring(lastEnd, thisStart)
        const textElement = [{
          element: document.createTextNode(removeNewLines ? text.replace(/\n\s*/g,' ') : text),
          'start': allChildren[allChildren.length - 1]['end'],
          'end': child['start']
        }]
        return allChildren.concat(textElement, child)
      }
    }
    return allChildren.concat(child)
  }, [])
  return interpolatedBlocks.filter(
    (child) => child['start'] !== undefined && child['end'] !== undefined
  )
}

/**
 * Creates the mouse-over text for each span.
 *
 * @param values The array of value objects formatted as {value: **, count: **}.
 * @return A single string for the mouse-over text.
 */
function buildValueString(values) {
  if (!values || !values.length) {
    return 'Expression never evaluated'
  } else if (values.length >= REPORT_LIMIT_SIZE) {
    const allCounts = values.reduce((acc, obj) => acc + obj.count, 0)
    return `${values.length} distinct items returned over ${allCounts} times`
  } else {
    return values.map(({value, count}) => {
      const allowedTypes = ['nullValue', 'boolValue', 'intValue', 'floatValue', 'stringValue',
        'bytesValue', 'durationValue', 'timestampValue', 'latlngValue', 'pathValue']
      const compressedTypes = ['mapValue', 'listValue', 'constraintValue']
      const typeAllowed = allowedTypes.filter(type => value[type] !== undefined).length == 1
      const typeCompressed = compressedTypes.filter(type => value[type] !== undefined).length >= 1
      // Format is value = {returnType: returnValue}
      // A returnType of undefined is an error. Unfortunately the field is called undefined.
      if (value['undefined']) {
        // Expression evaluated to error
        return `Error '${value.undefined.causeMessage}' occurred ${count} time(s)`
      } else if (typeCompressed) {
        // These types are recursive and are hard to read
        return `[object Object] returned ${count} time(s)`
      } else if (typeAllowed) {
        // The response is a simple literal
        // Object.values is not ES2015
        const realValue = Object.keys(value).map((key) => value[key])[0]
        return `Value ${JSON.stringify(realValue)} returned ${count} time(s)`
      } else if (Object.keys(value).length === 0) {
        // Clause not evaluated because of short-circuit.
        return `Expression short-circuited ${count} time(s)`
      } else {
        // For a properly formatted response each value should have one type.
        console.error('Found invalid expression-return type.')
      }
    }).join('\n')
  }
}
</script>
